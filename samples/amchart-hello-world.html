<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<div id="chartdiv" style="width: 640px; height: 400px;"></div>
<script src="app/js/amcharts.js" type="text/javascript"></script>
<script src="app/js/serial.js" type="text/javascript"></script>
<script>
    var chartData = [];

    var numberDate = 30;
    chartData = generateChartData(numberDate);

    function generateChartData(numberDate) {
        var arr = []
        var firstDate = new Date();
        var firstDay = firstDate.getDate() - numberDate;
        firstDate.setDate(firstDay ? firstDay : 1);

        for (var i = 0; i <= 5; i++) {
            // we create date objects here. In your data, you can have date strings
            // and then set format of your dates using chart.dataDateFormat property,
            // however when possible, use date objects, as this will speed up chart rendering.
            var newDate = new Date(firstDate);
            newDate.setDate(newDate.getDate() + i);

            var visits = Math.round(Math.random() * 40) - 20;

            arr.push({
                date: newDate,
                visits: visits
            });
        }
        return arr
    }

    AmCharts.ready(function () {
        // chart code will go here
        var chart = new AmCharts.AmSerialChart();
        chart.dataProvider = chartData;
        chart.categoryField = "date";
//        chart.angle = 30;
//        chart.depth3D = 15;

        var graph = new AmCharts.AmGraph();
        graph.valueField = "visits";
//        graph.type = "column";
        graph.type = "line";
//        graph.fillAlphas = 0.8;
//        graph.fillAlphas = 0.5;
        graph.balloonText = "[[category]]: <b>[[value]]</b>";
        graph.fillAlphas = 0; // or delete this line, as 0 is default
        graph.bullet = "round";
        graph.lineColor = "#8d1cc6";
        chart.addGraph(graph);

        var categoryAxis = chart.categoryAxis;
        categoryAxis.autoGridCount = false;
        categoryAxis.gridCount = chartData.length;
        categoryAxis.gridPosition = "start";
        categoryAxis.labelRotation = 90;

        categoryAxis.parseDates = true;
        categoryAxis.gridAlpha = 0.15;
        categoryAxis.minorGridEnabled = true;
        categoryAxis.axisColor = "#DADADA";

        var chartCursor = new AmCharts.ChartCursor();
        chartCursor.fullWidth = true;
        chartCursor.cursorAlpha = 0.1;
        chartCursor.pan = true;
        chartCursor.addListener('zoomed', handleZoom)

        function handleZoom(event) {
//            console.log(new Date(event.end).getTime(),chart.dataProvider[5].date.getTime())
            if (new Date(event.end).getDate() == chart.dataProvider[5].date.getDate()) {
                console.log(new Date(event.end).getDate(), chart.dataProvider[5].date.getDate())
                chartData = generateChartData(--numberDate - 1);
                chart.dataProvider = chartData
                chart.validateData();

            }/*else if (new Date(event.start).getDate() == chart.dataProvider[0].date.getDate()) {
//                console.log(new Date(event.end).getDate(), chart.dataProvider[5].date.getDate())
                chartData = generateChartData(++numberDate + 5);
                chart.dataProvider = chartData
                chart.validateData();
            }*/
        }

        chart.addChartCursor(chartCursor);


        chart.addListener("dataUpdated", function func() {
            zoomChart(chartData)
        });
        function zoomChart(chartData) {
            // different zoom methods can be used - zoomToIndexes, zoomToDates, zoomToCategoryValues
            chart.zoomToIndexes(0, 5 - 1);
        }

        chart.write('chartdiv');

    });

</script>
</body>
</html>